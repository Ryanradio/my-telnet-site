<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect to Pantheon Major BBS</title>
    <!-- Essential: These point to your uploaded local files -->
    <link href="ftelnet.css" rel="stylesheet">
    <!-- The ID below is required by fTelnet to find fonts/keyboard maps -->
    <script src="ftelnet.rip.xfer.min.js" id="fTelnetScript"></script>
    <style>
        body { 
            background-color: #000; color: #0f0; font-family: 'Courier New', monospace;
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box;
        }
        .container {
            max-width: 800px; border: 2px solid #0f0; padding: 30px;
            background-color: #001100; box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }
        h1 { text-align: center; color: #0f0; font-size: 2em; text-shadow: 0 0 10px #0f0; }
        .connection-info { background-color: #000; border: 1px solid #0f0; padding: 20px; margin: 20px 0; text-align: center; }
        .address { font-size: 1.5em; color: #fff; margin: 15px 0; word-break: break-all; }
        .copy-btn { background-color: #0f0; color: #000; border: none; padding: 10px 20px; cursor: pointer; margin: 10px 5px; }
        .client-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .client-link { background-color: #000; border: 1px solid #0f0; padding: 15px; text-align: center; text-decoration: none; color: #0f0; display: block; cursor: pointer; }
        .web-client-btn { border: 2px solid #fff; color: #fff; }
        #fTelnetContainer { margin-top: 20px; width: 100%; height: 500px; display: none; border: 1px solid #0f0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>═══ THE PANTHEON MAJOR BBS ═══</h1>
        <div class="connection-info" id="connectionInfo">Loading connection information...</div>
        <div class="client-links">
            <div class="client-link web-client-btn" onclick="connectViaWeb()">
                <strong>Connect via Web Browser</strong><br>Instant Access
            </div>
            <a href="https://www.putty.org" target="_blank" class="client-link"><strong>PuTTY</strong><br>Windows</a>
            <a href="https://apps.apple.com" target="_blank" class="client-link"><strong>Termius</strong><br>Mac/iOS</a>
        </div>
        <div id="fTelnetContainer"></div>
        <div class="last-updated" id="lastUpdated"></div>
    </div>
    <script>
        function connectViaWeb() {
            const container = document.getElementById('fTelnetContainer');
            container.style.display = 'block';
            container.scrollIntoView({ behavior: 'smooth' });

            var Options = new fTelnetOptions();
            
            // 1. The TARGET BBS Address (Pantheon)
            Options.Hostname = "3.22.53.161"; 
            Options.Port = 19352;

            // 2. The BRIDGE (Your Ngrok Domain)
            Options.ProxyHostname = "unabruptly-multiplated-kory.ngrok-free.dev"; 
            
            // 3. The CONNECTION Settings
            // GitHub (HTTPS) requires Secure WebSockets (WSS) via port 443
            Options.ProxyPort = 443; 
            Options.ProxyPortSecure = 443;
            Options.ProxyType = "websocket"; 

            var Client = new fTelnetClient('fTelnetContainer', Options);
        }

        async function loadConnectionInfo() {
            try {
                const response = await fetch('connection.json?t=' + new Date().getTime());
                const data = await response.json();
                document.getElementById('connectionInfo').innerHTML = `
                    <h2>Current Connection:</h2>
                    <div class="address"><strong>IP:</strong> ${data.ip}<br><strong>Port:</strong> ${data.port}</div>
                    <button class="copy-btn" onclick="navigator.clipboard.writeText('${data.ip}')">Copy IP</button>`;
                document.getElementById('lastUpdated').textContent = `Last updated: ${data.last_updated}`;
            } catch (error) { console.error(error); }
        }
        loadConnectionInfo();
    </script>
</body>
</html>
