<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pole Vault Biomechanics Engine</title>

<style>
body{
font-family:Arial, sans-serif;
background:#eef2f7;
margin:0;
padding:20px;
}

.container{
max-width:1100px;
margin:auto;
background:white;
border-radius:14px;
padding:20px;
box-shadow:0 10px 25px rgba(0,0,0,0.1);
}

h1{margin-top:0}

.grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
}

label{font-size:14px;font-weight:bold}
input,select{
width:100%;
padding:6px;
margin-bottom:10px;
}

button{
padding:10px 16px;
background:#2563eb;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
}

.card{
background:#f8fafc;
padding:15px;
border-radius:10px;
margin-top:15px;
}

.toggle{
margin-right:15px;
}

.big{
font-size:28px;
font-weight:bold;
}

.table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

.table th,.table td{
border:1px solid #ddd;
padding:6px;
text-align:center;
font-size:13px;
}

.good{color:#10b981;font-weight:bold}
.warn{color:#f59e0b;font-weight:bold}
.bad{color:#ef4444;font-weight:bold}

@media(max-width:800px){
.grid{grid-template-columns:1fr}
}
</style>
</head>

<body>

<div class="container">

<h1>Pole Vault Performance Engine</h1>

<div>

<label class="toggle"><input type="checkbox" id="toggleCoach" checked> Coach View</label>
<label class="toggle"><input type="checkbox" id="togglePhysics"> Physics View</label>
<label class="toggle"><input type="checkbox" id="toggleReco"> Recommendations</label>

</div>

<div class="grid">

<div>

<h3>Athlete</h3>

<label>Weight (lbs)</label>
<input id="weight" value="150">

<label>Height</label>
<div style="display:flex;gap:5px">
<input id="hFt" value="5">
<input id="hIn" value="10">
</div>

<label>Speed (mph)</label>
<input id="speed" value="19">

<label>Approach Steps</label>
<select id="steps">
<option>10</option>
<option>12</option>
<option selected>14</option>
<option>16</option>
<option>18</option>
</select>

<label>Skill Level</label>
<select id="skill">
<option>High School</option>
<option>College</option>
<option>Professional</option>
</select>

<label>Target Height (ft)</label>
<input id="target" value="15">

</div>

<div>

<h3>Pole</h3>

<label>Pole Length (ft)</label>
<input id="poleLength" value="15">

<label>Pole Rating (lbs)</label>
<input id="rating" value="165">

<label>Flex</label>
<input id="flex" value="20">

<label>Grip Height</label>
<div style="display:flex;gap:5px">
<input id="gFt" value="14">
<input id="gIn" value="9">
</div>

</div>

</div>

<button onclick="run()">Calculate</button>

<div id="coach" class="card"></div>
<div id="physics" class="card"></div>
<div id="reco" class="card"></div>

</div>

<script>

const g = 9.81;

/* ================= SKILL PROFILES ================= */

const SKILL = {
"High School":{
eff:0.55,
push:0.6,
com:0.25
},
"College":{
eff:0.65,
push:0.8,
com:0.35
},
"Professional":{
eff:0.75,
push:1.05,
com:0.45
}
};

/* ================= MAIN ================= */

function run(){

const weight = parseFloat(val("weight"));
const speedMph = parseFloat(val("speed"));
const speed = speedMph * 0.44704;
const steps = parseFloat(val("steps"));
const skill = SKILL[val("skill")];

const poleLength = parseFloat(val("poleLength"));
const rating = parseFloat(val("rating"));
const flex = parseFloat(val("flex"));

const grip =
(parseFloat(val("gFt")) +
parseFloat(val("gIn"))/12) * 0.3048;

const mass = weight * 0.453592;

/* ===== Approach efficiency from steps ===== */

let stepFactor = 1;
if(steps<=10) stepFactor=0.85;
else if(steps==12) stepFactor=0.92;
else if(steps==14) stepFactor=1.0;
else if(steps==16) stepFactor=1.05;
else if(steps>=18) stepFactor=1.08;

/* ===== Kinetic Energy ===== */

const kinetic = 0.5 * mass * speed * speed;

/* ===== Pole Match ===== */

const stiffnessIndex = rating / flex;
const demand = mass * speed * speed;

let match = clamp((stiffnessIndex*100)/demand,0.5,1.5);

/* ===== Swing Height ===== */

const swing =
(speed*speed/(2*g)) *
skill.eff *
stepFactor *
match *
0.65;

/* ===== Heights ===== */

const realistic =
grip +
swing +
skill.push +
skill.com;

const theoretical =
grip +
(speed*speed/(2*g))*0.9 +
skill.push +
skill.com;

/* ===== Safety ===== */

let safety="Good";
let safetyClass="good";

if(rating < weight){
safety="Under-rated pole";
safetyClass="bad";
}

if(grip > (poleLength*0.3048 - 0.2)){
safety="Grip too high";
safetyClass="warn";
}

/* ===== Coach Output ===== */

if(el("toggleCoach").checked){

el("coach").innerHTML = `
<h3>Coach View</h3>

<div class="big">${toFt(realistic)}</div>
Realistic Projection

<br><br>

Theoretical Ceiling: <b>${toFt(theoretical)}</b>

<br><br>

Safety: <span class="${safetyClass}">${safety}</span>

<br><br>

Grip: ${toFt(grip)}

`;
}else el("coach").innerHTML="";

/* ===== Physics Output ===== */

if(el("togglePhysics").checked){

el("physics").innerHTML = `
<h3>Physics</h3>

Mass: ${mass.toFixed(1)} kg<br>
Speed: ${speed.toFixed(2)} m/s<br>
Kinetic Energy: ${kinetic.toFixed(0)} J<br>
Efficiency: ${(skill.eff*100).toFixed(0)}%<br>
Step Factor: ${stepFactor.toFixed(2)}<br>
Pole Match: ${match.toFixed(2)}<br>
Swing Height: ${swing.toFixed(2)} m<br>
Push: ${skill.push.toFixed(2)} m<br>
COM Bonus: ${skill.com.toFixed(2)} m<br>

`;
}else el("physics").innerHTML="";

/* ===== Recommendations ===== */

if(el("toggleReco").checked){

let table=`<h3>Recommended Poles</h3>
<table class="table">
<tr>
<th>Pole</th>
<th>Grip</th>
<th>Speed Needed</th>
<th>Safe</th>
</tr>`;

const target = parseFloat(val("target")) * 0.3048;

for(let r=weight; r<=weight+40; r+=5){

let flexGuess = flex - (r-rating)*0.12;

let neededSpeed =
Math.sqrt(
2*g*(target - grip - skill.push - skill.com) /
(skill.eff*0.65)
);

let safe="Yes";
let cls="good";

if(r < weight){
safe="No";
cls="bad";
}

table += `
<tr>
<td>${poleLength}' ${r}</td>
<td>${toFt(grip)}</td>
<td>${(neededSpeed/0.44704).toFixed(1)} mph</td>
<td class="${cls}">${safe}</td>
</tr>
`;
}

table+="</table>";

el("reco").innerHTML = table;

}else el("reco").innerHTML="";

}

/* ================= HELPERS ================= */

function val(id){return document.getElementById(id).value;}
function el(id){return document.getElementById(id);}

function clamp(v,min,max){
return Math.max(min,Math.min(max,v));
}

function toFt(m){

const inches = m*39.37;
const f = Math.floor(inches/12);
const i = Math.round(inches%12);

return `${f}' ${i}"`;

}

</script>

</body>
</html>