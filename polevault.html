<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vault Mechanics Engine</title>

<style>
:root {
    --primary: #0f172a;
    --accent: #3b82f6;
    --danger: #ef4444;
    --warning: #f59e0b;
    --success: #10b981;
    --stall: #94a3b8;
    --bg: #f1f5f9;
    --card: #ffffff;
}

body {
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: var(--bg);
    margin:0;
    padding:20px;
    display:flex;
    justify-content:center;
}

.container {
    width:100%;
    max-width:900px;
    background:white;
    border-radius:20px;
    box-shadow:0 20px 25px rgba(0,0,0,0.1);
    overflow:hidden;
}

header {
    background:var(--primary);
    color:white;
    padding:2rem;
    text-align:center;
}

.content-grid {
    padding:2rem;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:2rem;
}

.section-label {
    font-size:.7rem;
    font-weight:800;
    text-transform:uppercase;
    color:#94a3b8;
    margin-bottom:.75rem;
    border-bottom:1px solid #e2e8f0;
}

.input-row { display:flex; gap:.75rem; margin-bottom:1.25rem; }
.input-group { flex:1; }

label {
    display:block;
    font-weight:600;
    font-size:.85rem;
    margin-bottom:.4rem;
}

input, select {
    width:100%;
    padding:.7rem;
    border:1px solid #cbd5e1;
    border-radius:8px;
}

.btn-calc {
    grid-column:span 2;
    background:var(--accent);
    color:white;
    padding:1rem;
    border:none;
    border-radius:10px;
    font-size:1.1rem;
    font-weight:700;
    cursor:pointer;
}

.results-container {
    background:#f8fafc;
    border-top:1px solid #e2e8f0;
    padding:2rem;
    display:none;
}

.slider-box {
    background:white;
    padding:1.5rem;
    border-radius:12px;
    margin-bottom:2rem;
}

input[type=range] {
    width:100%;
    height:12px;
    border-radius:6px;
    outline:none;
}

.zone-legend {
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:10px;
    margin-bottom:2rem;
}

.zone-item {
    background:white;
    padding:10px;
    border-radius:8px;
    text-align:center;
    border-bottom:4px solid;
    font-size:.8rem;
}

.metrics-grid {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:1.5rem;
}

.card {
    background:white;
    padding:1.5rem;
    border-radius:12px;
    text-align:center;
}

.card-val {
    font-size:2rem;
    font-weight:800;
}

@media(max-width:700px){
    .content-grid{grid-template-columns:1fr;}
    .btn-calc{grid-column:span 1;}
}
</style>
</head>

<body>

<div class="container">

<header>
<h1>Vault Mechanics Engine</h1>
<p>Physics-Based Pole Matching</p>
</header>

<div class="content-grid">

<div>
<div class="section-label">Athlete</div>

<div class="input-row">
<div class="input-group">
<label>Weight (lbs)</label>
<input id="weight" type="number" value="150">
</div>

<div class="input-group">
<label>Height</label>
<div style="display:flex;gap:5px;">
<input id="hFt" type="number" value="5">
<input id="hIn" type="number" value="10">
</div>
</div>
</div>

<div class="section-label">Grip</div>

<div class="input-row">
<div class="input-group">
<label>Feet</label>
<select id="gripFt"></select>
</div>

<div class="input-group">
<label>Inches</label>
<select id="gripIn"></select>
</div>

<div class="input-group">
<label>Frac</label>
<select id="gripFrac">
<option value="0">0</option>
<option value="0.125">1/8</option>
<option value="0.25">1/4</option>
<option value="0.5">1/2</option>
<option value="0.75">3/4</option>
</select>
</div>
</div>
</div>

<div>
<div class="section-label">Pole</div>

<div class="input-row">
<div class="input-group">
<label>Length</label>
<select id="length"></select>
</div>

<div class="input-group">
<label>Rating</label>
<select id="rating"></select>
</div>
</div>

<div class="input-row">
<div class="input-group">
<label>Flex (cm)</label>
<input id="flex" type="number" step="0.1" value="17">
</div>
</div>
</div>

<button class="btn-calc" onclick="initSimulation()">Initialize</button>

</div>

<div id="results" class="results-container">

<div class="slider-box">

<div style="display:flex;justify-content:space-between;">
<div>Approach Velocity</div>
<div>
<div id="speedDisplayMPH">--</div>
<div id="speedDisplayMS">--</div>
</div>
</div>

<input id="speedSlider" type="range" min="5" max="11" step="0.05" oninput="runPhysics()">

</div>

<div class="zone-legend">
<div class="zone-item" style="border-color:#94a3b8">Stall<br><span id="rngStall"></span></div>
<div class="zone-item" style="border-color:#f59e0b">Under<br><span id="rngWarn"></span></div>
<div class="zone-item" style="border-color:#10b981">Optimal<br><span id="rngOpt"></span></div>
<div class="zone-item" style="border-color:#ef4444">Blow<br><span id="rngBlow"></span></div>
</div>

<div class="metrics-grid">
<div class="card">
<div>Realistic</div>
<div class="card-val" id="hReal">--</div>
</div>

<div class="card">
<div>Theoretical</div>
<div class="card-val" id="hTheo">--</div>
</div>
</div>

</div>

</div>

<script>

/* ================= CONFIG ================= */

const CONFIG = {
BASE_SPEED: 7.2,
PUSH_OPTIMAL: 0.7,
PUSH_BLOW: 0.45,
EFFICIENCY_BASE: 0.63,
GRAVITY: 9.81
};

let zones = null;

/* ================= INIT ================= */

document.addEventListener("DOMContentLoaded", populateDropdowns);

function populateDropdowns(){

const len = document.getElementById("length");
for(let f=10; f<=18; f++){
[0,6].forEach(i=>{
if(f===18 && i===6) return;
let val = f+(i/12);
let o=document.createElement("option");
o.value=val;
o.text=`${f}' ${i}"`;
if(val===15) o.selected=true;
len.appendChild(o);
});
}

const rate=document.getElementById("rating");
for(let w=90; w<=220; w+=5){
let o=document.createElement("option");
o.value=w;
o.text=w;
if(w===160)o.selected=true;
rate.appendChild(o);
}

const gripFt=document.getElementById("gripFt");
for(let f=10; f<=17; f++){
let o=document.createElement("option");
o.value=f;
o.text=f;
if(f===14)o.selected=true;
gripFt.appendChild(o);
}

const gripIn=document.getElementById("gripIn");
for(let i=0;i<=11;i++){
let o=document.createElement("option");
o.value=i;
o.text=i;
if(i===9)o.selected=true;
gripIn.appendChild(o);
}

}

/* ================= SIM ================= */

function initSimulation(){

const weight = parseFloat(weightEl().value);
const flex = parseFloat(flexEl().value);

const stiffnessIndex = 20 / flex;

let optimalSpeed =
CONFIG.BASE_SPEED *
Math.sqrt(stiffnessIndex * (weight/75));

optimalSpeed = clamp(optimalSpeed,5.5,10);

zones = {
stall: optimalSpeed - 1.1,
warn: optimalSpeed - 0.3,
opt: optimalSpeed,
blow: optimalSpeed + 1.2
};

updateZoneDisplays();

const slider = speedEl();
slider.value = optimalSpeed;

document.getElementById("results").style.display="block";

runPhysics();
}

/* ================= PHYSICS ================= */

function runPhysics(){

const speed = parseFloat(speedEl().value);
const weight = parseFloat(weightEl().value);

displaySpeed(speed);

const mass = weight * 0.453592;

const kinetic = 0.5 * mass * speed * speed;

const gripM = getGripMeters();

let efficiency = CONFIG.EFFICIENCY_BASE;

let push = CONFIG.PUSH_OPTIMAL;

if(speed < zones.stall){
efficiency *= 0.4;
push = 0;
}
else if(speed < zones.warn){
efficiency *= 0.7;
push = 0.15;
}
else if(speed > zones.blow){
efficiency *= 0.85;
push = CONFIG.PUSH_BLOW;
}

const potentialHeight =
(kinetic * efficiency) /
(mass * CONFIG.GRAVITY);

const realistic =
Math.min(gripM + push, potentialHeight);

const theoretical =
(kinetic * 0.75) /
(mass * CONFIG.GRAVITY);

document.getElementById("hReal").innerText = toFtIn(realistic);
document.getElementById("hTheo").innerText = toFtIn(theoretical);

}

/* ================= HELPERS ================= */

function updateZoneDisplays(){

const toMph = m=> (m*2.237).toFixed(1);

document.getElementById("rngStall").innerText =
`< ${toMph(zones.stall)} mph`;

document.getElementById("rngWarn").innerText =
`${toMph(zones.stall)} - ${toMph(zones.warn)}`;

document.getElementById("rngOpt").innerText =
`${toMph(zones.warn)} - ${toMph(zones.blow)}`;

document.getElementById("rngBlow").innerText =
`> ${toMph(zones.blow)} mph`;

}

function getGripMeters(){

const gFt = parseInt(gripFtEl().value);
const gIn = parseInt(gripInEl().value);
const gFr = parseFloat(gripFracEl().value);

return (gFt + ((gIn+gFr)/12)) * 0.3048;

}

function displaySpeed(speed){

const mph = speed * 2.23694;

document.getElementById("speedDisplayMPH").innerText =
mph.toFixed(1) + " mph";

document.getElementById("speedDisplayMS").innerText =
speed.toFixed(2) + " m/s";

}

function toFtIn(m){

const inches = m * 39.37;

const f = Math.floor(inches/12);
const i = Math.round(inches%12);

return `${f}' ${i}"`;

}

function clamp(v,min,max){
return Math.max(min,Math.min(max,v));
}

/* ================= ELEMENTS ================= */

const weightEl = ()=>document.getElementById("weight");
const flexEl = ()=>document.getElementById("flex");
const speedEl = ()=>document.getElementById("speedSlider");
const gripFtEl = ()=>document.getElementById("gripFt");
const gripInEl = ()=>document.getElementById("gripIn");
const gripFracEl = ()=>document.getElementById("gripFrac");

</script>

</body>
</html>