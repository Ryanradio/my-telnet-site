<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VaultIQ â€” Pole Vault Performance Engine</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --ink:     #0a0f1e;
  --ink2:    #1a2035;
  --panel:   #111827;
  --border:  #1e2a3a;
  --muted:   #4b5e73;
  --text:    #c8d6e4;
  --white:   #f0f6ff;
  --green:   #00e5a0;
  --amber:   #ffb827;
  --red:     #ff4d6a;
  --slate:   #607B9B;
  --accent:  #3d8bff;
  --accent2: #6eb7ff;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'DM Sans', system-ui, sans-serif;
  background: var(--ink);
  color: var(--text);
  min-height: 100vh;
  padding: 24px 16px 60px;
}

/* â”€â”€â”€ LAYOUT â”€â”€â”€ */
.wrap { max-width: 1080px; margin: 0 auto; }

/* â”€â”€â”€ HEADER â”€â”€â”€ */
header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  padding: 0 0 36px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 36px;
  gap: 1rem;
  flex-wrap: wrap;
}
.logo-mark {
  display: flex;
  align-items: center;
  gap: 14px;
}
.logo-icon {
  width: 44px; height: 44px;
  background: var(--accent);
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem;
  flex-shrink: 0;
}
.logo-text h1 {
  font-family: 'Syne', sans-serif;
  font-size: 1.7rem;
  color: var(--white);
  letter-spacing: -0.5px;
  line-height: 1;
}
.logo-text p {
  font-size: 0.75rem;
  color: var(--muted);
  margin-top: 4px;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}
.tag {
  background: rgba(61,139,255,0.15);
  border: 1px solid rgba(61,139,255,0.35);
  color: var(--accent2);
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 600;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  align-self: flex-start;
}

/* â”€â”€â”€ INPUT GRID â”€â”€â”€ */
.input-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2px;
  background: var(--border);
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--border);
  margin-bottom: 20px;
}
.input-section {
  background: var(--panel);
  padding: 28px;
}
.input-section:first-child { border-radius: 16px 0 0 16px; }
.input-section:last-child { border-radius: 0 16px 16px 0; }

.sec-title {
  font-family: 'DM Mono', monospace;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--accent);
  margin-bottom: 22px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border);
}

.field-row { display: flex; gap: 12px; margin-bottom: 16px; }
.field { flex: 1; }
.field-label {
  display: block;
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.8px;
  margin-bottom: 8px;
}
input[type=number], select {
  width: 100%;
  padding: 10px 12px;
  background: var(--ink);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--white);
  font-family: 'DM Sans', sans-serif;
  font-size: 0.95rem;
  font-weight: 500;
  transition: border-color 0.2s, box-shadow 0.2s;
  -webkit-appearance: none;
}
input[type=number]:focus, select:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(61,139,255,0.15);
}
select option { background: var(--ink2); }
.field-hint {
  display: block;
  font-size: 0.65rem;
  color: var(--muted);
  margin-top: 5px;
  font-style: italic;
}

/* Tech Toggle */
.toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--ink);
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid var(--border);
  margin-top: 6px;
}
.toggle-info { flex: 1; }
.toggle-title { font-size: 0.85rem; font-weight: 600; color: var(--white); }
.toggle-sub { font-size: 0.7rem; color: var(--muted); margin-top: 2px; }
.switch {
  position: relative; display: inline-block;
  width: 44px; height: 24px; flex-shrink: 0;
}
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
  position: absolute; cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background: var(--border);
  transition: 0.3s; border-radius: 24px;
}
.slider:before {
  position: absolute; content: "";
  height: 18px; width: 18px;
  left: 3px; bottom: 3px;
  background: var(--white);
  transition: 0.3s; border-radius: 50%;
}
input:checked + .slider { background: var(--accent); }
input:checked + .slider:before { transform: translateX(20px); }

/* â”€â”€â”€ CTA BUTTON â”€â”€â”€ */
.btn-run {
  width: 100%;
  padding: 16px;
  background: var(--accent);
  color: var(--ink);
  border: none;
  border-radius: 12px;
  font-family: 'Syne', sans-serif;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  letter-spacing: 0.5px;
  transition: transform 0.15s, box-shadow 0.2s, background 0.2s;
  box-shadow: 0 8px 24px -6px rgba(61,139,255,0.5);
  margin-bottom: 20px;
}
.btn-run:hover {
  background: var(--accent2);
  transform: translateY(-2px);
  box-shadow: 0 12px 30px -6px rgba(61,139,255,0.6);
}
.btn-run:active { transform: translateY(0); }

/* â”€â”€â”€ RESULTS â”€â”€â”€ */
#results { display: none; }

/* Velocity Panel */
.vel-panel {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 20px;
}
.vel-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 20px;
  flex-wrap: wrap; gap: 12px;
}
.vel-left .label {
  font-family: 'DM Mono', monospace;
  font-size: 0.65rem; text-transform: uppercase; letter-spacing: 2px;
  color: var(--accent); margin-bottom: 8px;
}
.status-chip {
  display: inline-block;
  padding: 5px 14px;
  border-radius: 20px;
  font-weight: 700;
  font-size: 0.75rem;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  background: rgba(96,123,155,0.2); color: var(--slate);
}
.vel-right { text-align: right; }
.big-speed {
  font-family: 'Syne', sans-serif;
  font-size: 3rem;
  color: var(--white);
  line-height: 1;
}
.speed-units {
  font-size: 0.8rem; color: var(--accent); font-weight: 600;
  display: flex; align-items: center; justify-content: flex-end;
  gap: 10px; margin-top: 4px;
}
.speed-ms { color: var(--muted); font-family: 'DM Mono', monospace; }

/* Range Slider */
input[type=range] {
  -webkit-appearance: none;
  width: 100%; height: 14px;
  border-radius: 7px;
  outline: none;
  margin: 12px 0;
  cursor: pointer;
  background: var(--border);
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 28px; height: 28px;
  background: var(--white);
  border: 4px solid var(--ink);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  margin-top: -7px;
  transition: transform 0.1s, border-color 0.2s;
}
input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.15); border-color: var(--accent); }

/* Zone Legend */
.zone-grid {
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 8px; margin-top: 14px;
}
.zone-item {
  background: var(--ink);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px;
  text-align: center;
}
.zone-name { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
.zone-val { display: block; font-family: 'DM Mono', monospace; font-size: 0.8rem; margin-top: 4px; font-weight: 500; }

/* â”€â”€â”€ METRICS ROW â”€â”€â”€ */
.metrics-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 20px;
}
.m-card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 20px 18px;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.m-card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 3px;
  background: var(--border);
}
.m-card.highlight::before { background: var(--accent); }
.m-card.good::before { background: var(--green); }
.m-label {
  font-family: 'DM Mono', monospace;
  font-size: 0.6rem; text-transform: uppercase; letter-spacing: 1.5px;
  color: var(--muted); margin-bottom: 10px;
}
.m-val {
  font-family: 'Syne', sans-serif;
  font-size: 1.9rem; color: var(--white); line-height: 1;
}
.m-card.highlight .m-val { color: var(--accent); }
.m-card.good .m-val { color: var(--green); }
.m-sub { font-size: 0.7rem; color: var(--muted); margin-top: 6px; }

/* Load bar */
.load-bar-wrap { margin-top: 8px; }
.load-bar-bg {
  height: 6px; background: var(--ink); border-radius: 3px; overflow: hidden;
}
.load-bar-fill {
  height: 100%; border-radius: 3px; transition: width 0.6s ease;
}



/* â”€â”€â”€ RECOMMENDATIONS â”€â”€â”€ */
.rec-section-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 16px;
  flex-wrap: wrap; gap: 8px;
}
.rec-section-title {
  font-family: 'Syne', sans-serif;
  font-size: 1.1rem; color: var(--white); font-weight: 700;
}
.rec-sub { font-size: 0.75rem; color: var(--muted); }

.rec-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  margin-bottom: 28px;
}

.rec-card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 18px;
  cursor: pointer;
  transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
  position: relative;
  overflow: hidden;
}
.rec-card:hover { transform: translateY(-3px); box-shadow: 0 12px 28px rgba(0,0,0,0.3); }
.rec-card.best { border-color: var(--green); }
.rec-card.best::after {
  content: 'NEXT STEP';
  position: absolute; top: 12px; right: 12px;
  font-size: 0.55rem; font-weight: 700; letter-spacing: 1.2px;
  text-transform: uppercase;
  background: var(--green); color: var(--ink);
  padding: 3px 8px; border-radius: 20px;
}
.rec-card.blow { border-color: rgba(255,77,106,0.4); }
.rec-card.stall { border-color: rgba(96,123,155,0.4); opacity: 0.7; }
.rec-card.current { border-color: var(--accent); }
.rec-card.current::after {
  content: 'CURRENT';
  position: absolute; top: 12px; right: 12px;
  font-size: 0.55rem; font-weight: 700; letter-spacing: 1.2px;
  text-transform: uppercase;
  background: var(--accent); color: var(--ink);
  padding: 3px 8px; border-radius: 20px;
}

.rec-pole-name {
  font-family: 'Syne', sans-serif;
  font-size: 1.15rem; color: var(--white); margin-bottom: 2px;
}
.rec-type { font-size: 0.7rem; color: var(--muted); margin-bottom: 14px; }
.rec-height {
  font-family: 'Syne', sans-serif;
  font-size: 1.7rem; color: var(--green); line-height: 1;
}
.rec-card.blow .rec-height { color: var(--red); }
.rec-card.stall .rec-height { color: var(--slate); }
.rec-card.current .rec-height { color: var(--accent); }
.rec-diff { font-size: 0.75rem; margin-top: 4px; font-weight: 500; }
.rec-status-chip {
  display: inline-block; margin-top: 10px;
  padding: 3px 10px; border-radius: 20px;
  font-size: 0.6rem; font-weight: 700; letter-spacing: 1px;
  text-transform: uppercase;
}

/* â”€â”€â”€ INSIGHT BOX â”€â”€â”€ */
.insight-box {
  background: var(--ink2);
  border: 1px solid var(--border);
  border-left: 4px solid var(--accent);
  border-radius: 10px;
  padding: 16px 18px;
  margin-bottom: 20px;
  font-size: 0.85rem;
  line-height: 1.6;
  color: var(--text);
}
.insight-box strong { color: var(--accent2); }

/* Reset */
.btn-reset {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  padding: 10px 24px;
  border-radius: 30px;
  font-family: 'DM Sans', sans-serif;
  font-weight: 600;
  cursor: pointer;
  font-size: 0.85rem;
  transition: border-color 0.2s, color 0.2s;
  margin-top: 12px;
}
.btn-reset:hover { border-color: var(--text); color: var(--text); }

.divider {
  height: 1px; background: var(--border);
  margin: 28px 0;
}

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
@media (max-width: 720px) {
  .input-grid { grid-template-columns: 1fr; }
  .input-section:first-child { border-radius: 16px 16px 0 0; }
  .input-section:last-child { border-radius: 0 0 16px 16px; }
  .metrics-row { grid-template-columns: 1fr; }
  .zone-grid { grid-template-columns: 1fr 1fr; }

  .big-speed { font-size: 2.2rem; }
}
</style>
</head>
<body>
<div class="wrap">

  <!-- HEADER -->
  <header>
    <div class="logo-mark">
      <div class="logo-icon">ğŸƒ</div>
      <div class="logo-text">
        <h1>VaultIQ</h1>
        <p>Pole Vault Performance Engine</p>
      </div>
    </div>
    <span class="tag">Physics Core v7</span>
  </header>

  <!-- INPUT SECTION -->
  <div class="input-grid">

    <!-- ATHLETE -->
    <div class="input-section">
      <div class="sec-title">01 â€” Athlete Data</div>

      <div class="field-row">
        <div class="field">
          <label class="field-label">Body Weight (lbs)</label>
          <input type="number" id="weight" value="148" min="90" max="260">
        </div>
        <div class="field">
          <label class="field-label">Height</label>
          <div style="display:flex;gap:8px;">
            <input type="number" id="hFt" value="5" min="4" max="7" placeholder="ft">
            <input type="number" id="hIn" value="9" min="0" max="11" placeholder="in">
          </div>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label class="field-label">Standing Reach (ft)</label>
          <input type="number" id="standingReach" step="0.1" placeholder="Auto (height Ã— 1.27)">
          <span class="field-hint">Fingertip reach, arms fully extended</span>
        </div>
        <div class="field">
          <label class="field-label">Current PR</label>
          <div style="display:flex;gap:8px;">
            <select id="prFt"></select>
            <select id="prIn"></select>
          </div>
          <span class="field-hint">Personal record for comparison</span>
        </div>
      </div>

      <div class="sec-title" style="margin-top:20px;">02 â€” Grip Height</div>
      <div class="field-row">
        <div class="field">
          <label class="field-label">Feet</label>
          <select id="gripFt"></select>
        </div>
        <div class="field">
          <label class="field-label">Inches</label>
          <select id="gripIn"></select>
        </div>
        <div class="field">
          <label class="field-label">Fraction</label>
          <select id="gripFrac">
            <option value="0">0"</option>
            <option value="0.125">â…›"</option>
            <option value="0.25">Â¼"</option>
            <option value="0.375">â…œ"</option>
            <option value="0.5">Â½"</option>
            <option value="0.625">â…"</option>
            <option value="0.75">Â¾"</option>
          </select>
        </div>
      </div>

      <div class="toggle-row">
        <div class="toggle-info">
          <div class="toggle-title">Advanced Technique Mode</div>
          <div class="toggle-sub">Free takeoff / proper plant angle / hip drive</div>
        </div>
        <label class="switch">
          <input type="checkbox" id="effToggle" checked>
          <span class="slider"></span>
        </label>
      </div>
    </div>

    <!-- POLE -->
    <div class="input-section">
      <div class="sec-title">03 â€” Pole Parameters</div>

      <div class="field-row">
        <div class="field">
          <label class="field-label">Manufacturer</label>
          <select id="brand" onchange="estimateFlex()">
            <option value="UCS">UCS Spirit</option>
            <option value="Essx">Essx</option>
            <option value="Pacer">Gill Pacer</option>
            <option value="Altius">Altius</option>
            <option value="Skypole">Skypole</option>
            <option value="Nordic">Nordic</option>
          </select>
        </div>
        <div class="field">
          <label class="field-label">Length</label>
          <select id="length" onchange="estimateFlex()"></select>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label class="field-label">Weight Rating (lbs)</label>
          <select id="rating" onchange="estimateFlex()"></select>
        </div>
        <div class="field">
          <label class="field-label">Flex Number (cm)</label>
          <input type="number" id="flex" step="0.1" placeholder="20.0">
          <span class="field-hint" style="color:var(--amber);">â˜… Primary stiffness variable</span>
        </div>
      </div>

      <div style="background: var(--ink); border:1px solid var(--border); border-radius:10px; padding: 14px 16px; margin-top: 8px;">
        <div style="font-size:0.65rem; font-family:'DM Mono',monospace; text-transform:uppercase; letter-spacing:1.5px; color:var(--accent); margin-bottom:8px;">Physics Reference</div>
        <div style="font-size:0.78rem; color:var(--muted); line-height:1.6;">
          <strong style="color:var(--text);">Lower flex #</strong> = stiffer pole = needs more speed<br>
          <strong style="color:var(--text);">Higher flex #</strong> = softer pole = loads easier<br>
          Ideal load zone: <strong style="color:var(--green);">85â€“100%</strong> of rating
        </div>
      </div>

      <!-- Stiffness Load Preview -->
      <div class="load-bar-wrap" style="margin-top:16px;">
        <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
          <span style="font-size:0.7rem;color:var(--muted);font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:1px;">Weight / Rating Load</span>
          <span id="loadPreview" style="font-size:0.7rem;color:var(--amber);font-weight:600;">--</span>
        </div>
        <div class="load-bar-bg">
          <div id="loadBarLive" class="load-bar-fill" style="width:0%;background:var(--amber);"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- CALCULATE BUTTON -->
  <button class="btn-run" onclick="initPhysics()">âš¡ Calculate Vault Projections & Pole Recommendations</button>

  <!-- â”€â”€â”€ RESULTS â”€â”€â”€ -->
  <div id="results">

    <!-- VELOCITY SLIDER -->
    <div class="vel-panel">
      <div class="vel-header">
        <div class="vel-left">
          <div class="label">Approach Velocity Simulator</div>
          <div id="statusChip" class="status-chip">â€”</div>
        </div>
        <div class="vel-right">
          <div class="big-speed" id="dispMph">â€”</div>
          <div class="speed-units">
            <span>MPH</span>
            <span class="speed-ms" id="dispMs">â€” m/s</span>
          </div>
        </div>
      </div>

      <input type="range" id="kSlider" min="5.0" max="11.5" step="0.05" oninput="updateSim()">

      <div class="zone-grid">
        <div class="zone-item" style="border-color:rgba(96,123,155,0.3);">
          <span class="zone-name" style="color:var(--slate);">Stall / Reject</span>
          <span class="zone-val" id="lStall" style="color:var(--slate);">â€”</span>
        </div>
        <div class="zone-item" style="border-color:rgba(255,184,39,0.3);">
          <span class="zone-name" style="color:var(--amber);">Under Power</span>
          <span class="zone-val" id="lWarn" style="color:var(--amber);">â€”</span>
        </div>
        <div class="zone-item" style="border-color:rgba(0,229,160,0.3);">
          <span class="zone-name" style="color:var(--green);">Optimal Lock</span>
          <span class="zone-val" id="lOpt" style="color:var(--green);">â€”</span>
        </div>
        <div class="zone-item" style="border-color:rgba(255,77,106,0.3);">
          <span class="zone-name" style="color:var(--red);">Blow Through</span>
          <span class="zone-val" id="lBlow" style="color:var(--red);">â€”</span>
        </div>
      </div>
    </div>

    <!-- METRICS -->
    <div class="metrics-row">
      <div class="m-card">
        <div class="m-label">Energy Ceiling</div>
        <div class="m-val" id="hCeiling">â€”</div>
        <div class="m-sub">Theoretical max (no losses)</div>
      </div>
      <div class="m-card good">
        <div class="m-label">Projected Height</div>
        <div class="m-val" id="hProj">â€”</div>
        <div class="m-sub">With current pole + grip</div>
      </div>
      <div class="m-card highlight">
        <div class="m-label">Stiffness Load</div>
        <div class="m-val" id="loadVal">â€”</div>
        <div class="m-sub">Body weight vs. rating</div>
        <div class="load-bar-wrap" style="margin-top:10px;">
          <div class="load-bar-bg">
            <div id="loadBarResult" class="load-bar-fill" style="width:0%;background:var(--green);"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- COACHING INSIGHT -->
    <div id="insightBox" class="insight-box"></div>

    <div class="divider"></div>

    <!-- POLE RECOMMENDATIONS -->
    <div class="rec-section-header">
      <div>
        <div class="rec-section-title">Pole Progression Recommendations</div>
        <div class="rec-sub">Current pole shown first, then next logical steps ranked by projected height</div>
      </div>
    </div>
    <div id="recContainer" class="rec-grid"></div>

    <div style="text-align:center;">
      <button class="btn-reset" onclick="resetAll()">â†‘ Reset Simulation</button>
    </div>
  </div>

</div><!-- /wrap -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONSTANTS & STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const G = 9.80665;
let zStall, zWarn, zOpt, zBlow;
let currentPoleData = {};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT UI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', () => {
  buildSelects();
  estimateFlex();
  // Live load bar
  ['rating','weight'].forEach(id =>
    document.getElementById(id).addEventListener('input', updateLoadPreview)
  );
  document.getElementById('rating').addEventListener('change', updateLoadPreview);
  updateLoadPreview();
});

function buildSelects() {
  const lenSel = document.getElementById('length');
  const rateSel = document.getElementById('rating');
  const gFt = document.getElementById('gripFt');
  const gIn = document.getElementById('gripIn');
  const pFt = document.getElementById('prFt');
  const pIn = document.getElementById('prIn');

  // Pole lengths 10'0" to 18'0" in 6" steps
  for (let f = 10; f <= 18; f++) {
    [0, 6].forEach(i => {
      if (f === 18 && i === 6) return;
      const val = f + i / 12;
      const opt = new Option(`${f}' ${i === 0 ? '0"' : '6"'}`, val);
      if (val === 15) opt.selected = true;
      lenSel.add(opt);
    });
  }

  // Ratings 90â€“230 in 5 lb steps
  for (let w = 90; w <= 230; w += 5) {
    const opt = new Option(`${w} lbs`, w);
    if (w === 165) opt.selected = true;
    rateSel.add(opt);
  }

  // Grip feet 10â€“17
  for (let f = 10; f <= 17; f++) {
    const opt = new Option(`${f}'`, f);
    if (f === 14) opt.selected = true;
    gFt.add(opt);
  }

  // Grip inches 0â€“11
  for (let i = 0; i <= 11; i++) {
    const opt = new Option(`${i}"`, i);
    if (i === 9) opt.selected = true;
    gIn.add(opt);
  }

  // PR feet 8â€“20
  for (let f = 8; f <= 20; f++) {
    const opt = new Option(`${f}'`, f);
    if (f === 14) opt.selected = true;
    pFt.add(opt);
  }

  // PR inches 0â€“11
  for (let i = 0; i <= 11; i++) {
    const opt = new Option(`${i}"`, i);
    if (i === 11) opt.selected = true;
    pIn.add(opt);
  }
}

function updateLoadPreview() {
  const w = parseFloat(document.getElementById('weight').value) || 0;
  const r = parseFloat(document.getElementById('rating').value) || 165;
  const ratio = (w / r) * 100;
  document.getElementById('loadPreview').innerText = ratio.toFixed(0) + '%';
  const bar = document.getElementById('loadBarLive');
  bar.style.width = Math.min(ratio, 130) + '%';
  bar.style.background = ratio >= 80 && ratio <= 110 ? 'var(--green)' :
                          ratio > 110 ? 'var(--red)' : 'var(--amber)';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FLEX ESTIMATOR (heuristic seed only)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function estimateFlex() {
  const L = parseFloat(document.getElementById('length').value) || 15;
  const W = parseInt(document.getElementById('rating').value) || 165;
  const brand = document.getElementById('brand').value;
  let base = 20.5 - (W - 150) * 0.05 + (L - 14) * 1.4;
  if (brand === 'Essx')   base -= 0.6;
  if (brand === 'Pacer')  base += 0.4;
  if (brand === 'Nordic') base -= 0.3;
  const fInput = document.getElementById('flex');
  if (!fInput.value) fInput.value = Math.max(14, base).toFixed(1);
  updateLoadPreview();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STIFFNESS INDEX
//  k âˆ rating Ã— (ref_flex/flex)^1.5 Ã— (L/14)^2.5
//  Longer poles need more speed to load (empirical exponent 2.5)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcStiffness(rating, flex, length) {
  const rateFactor = rating / 150;
  const flexFactor = Math.pow(20.0 / Math.max(flex, 10), 1.5);
  const lenFactor  = Math.pow(length / 14, 2.5);     // tuned exponent
  return rateFactor * flexFactor * lenFactor;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  OPTIMAL SPEED FOR A GIVEN POLE
//  Calibrated so: 165lb/20flex/15' â†’ v_opt â‰ˆ 7.9 m/s (~17.7 mph)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcVopt(rating, flex, length, athleteWeight) {
  const k = calcStiffness(rating, flex, length);
  const massRatio = athleteWeight / 150;
  let v = 6.7 * Math.sqrt(k / massRatio);
  // Clamp to realistic range: 5.5â€“11.5 m/s
  return Math.max(5.5, Math.min(11.5, v));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PROJECTED HEIGHT  (FIXED PHYSICS MODEL)
//
//  Core insight: pole vault height is NOT simply vÂ²/2g + COM.
//  The vaulter's active muscular work (swing, push-off, rotation)
//  contributes significant additional energy above the run KE.
//  We model this via an "overhead above grip" formula:
//
//    overhead = base + speed_coeff Ã— max(0, v_surplus + 0.3)
//    h_proj   = grip_m + overhead   (capped at overhead_max)
//
//  This correctly centers projected height on GRIP HEIGHT,
//  not COM, and matches real-world college vault data.
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function projectHeight(v, vOpt, grip_m, effToggle) {
  const vSurplus  = v - vOpt;
  const isElite   = effToggle;

  // Zone determination
  const zS = vOpt - 1.0;
  const zW = vOpt - 0.3;
  const zB = vOpt + 0.8;

  if (v < zS) {
    // Stall â€” pole doesn't load, bar drops
    return { h: grip_m * 0.88, status: 'STALL' };
  }
  if (v < zW) {
    // Under â€” partial load, limited overhead
    const fraction = (v - zS) / (zW - zS); // 0â†’1
    const overhead = (isElite ? 0.12 : 0.08) * fraction;
    return { h: grip_m + overhead, status: 'UNDER' };
  }
  if (v > zB) {
    // Blow through â€” pole too stiff, athlete passes grip angle poorly
    return { h: grip_m + 0.14, status: 'BLOW' };
  }

  // âœ… OPTIMAL ZONE
  const base_oh   = isElite ? 0.24 : 0.16;  // m overhead at v = vOpt
  const spd_coeff = isElite ? 0.44 : 0.30;  // m per m/s surplus
  const cap_oh    = isElite ? 0.80 : 0.52;  // absolute max overhead (m)
  const overhead  = Math.min(base_oh + spd_coeff * Math.max(0, vSurplus + 0.3), cap_oh);
  return { h: grip_m + overhead, status: 'OPTIMAL' };
}

// Theoretical energy ceiling (for display only â€” not the vault prediction)
function energyCeiling(v, h_com) {
  return (v * v) / (2 * G) + h_com;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  OPTIMAL GRIP HEIGHT
//  Max grip = min(standing_reach + 20â€“24", pole_length â€“ 14")
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function optimalGrip(vaulterHeightFt, standingReachFt, poleLength_ft, v, vOpt) {
  const reachFt = standingReachFt > 0 ? standingReachFt : vaulterHeightFt * 1.27;
  const reachM  = reachFt * 0.3048;
  const maxFromReach = reachM + 0.55;            // ~22" above standing reach
  const maxFromPole  = (poleLength_ft - 1.17) * 0.3048;  // 14" from top
  const anatomicMax  = Math.min(maxFromReach, maxFromPole);
  // Reduce if speed is below optimal
  const speedFraction = Math.max(0.7, Math.min(1.0, v / vOpt));
  return anatomicMax * speedFraction;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  POLE RECOMMENDATION ENGINE
//  Generates current + next 2 logical steps (6" and 12" longer)
//  and a "stiffer same length" option if blowing through
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function genRecommendations(athleteWeight, heightFt, v, currentPole, effToggle) {
  const recs = [];
  const cLen = parseFloat(currentPole.length);
  const cRat = parseFloat(currentPole.rating);
  const cFlex = parseFloat(currentPole.flex);
  const hFt = heightFt;

  // Helper to compute projected height for a candidate pole
  function evalPole(pole) {
    const vO = calcVopt(pole.rating, pole.flex, pole.length, athleteWeight);
    // Grip for this pole: athlete's natural grip + increment from length
    const lengthIncrease = pole.length - cLen;
    const baseFt = parseInt(document.getElementById('gripFt').value);
    const baseIn = parseInt(document.getElementById('gripIn').value) +
                   parseFloat(document.getElementById('gripFrac').value);
    const baseGripM  = (baseFt + baseIn / 12) * 0.3048;
    // On a longer pole, grip can go up proportionally (~0.5" per inch of pole)
    const extraGripM  = (lengthIncrease * 0.3048) * 0.55;
    const grip_m      = baseGripM + extraGripM;
    const { h, status } = projectHeight(v, vO, grip_m, effToggle);
    return { ...pole, vOpt: vO, grip_m, projH: h, status };
  }

  // --- CURRENT POLE ---
  const gFt = parseInt(document.getElementById('gripFt').value);
  const gIn = parseInt(document.getElementById('gripIn').value) +
              parseFloat(document.getElementById('gripFrac').value);
  const currentGrip_m = (gFt + gIn / 12) * 0.3048;
  const currentVopt   = calcVopt(cRat, cFlex, cLen, athleteWeight);
  const { h: curH, status: curStatus } = projectHeight(v, currentVopt, currentGrip_m, effToggle);

  recs.push({
    length: cLen, rating: cRat, flex: cFlex,
    type: `${lenLabel(cLen)} Â· Current Pole`,
    isCurrent: true,
    vOpt: currentVopt, grip_m: currentGrip_m,
    projH: curH, status: curStatus
  });

  // --- BLOW-THROUGH OPTION: stiffer same length ---
  if (curStatus === 'BLOW') {
    const stifferPole = {
      length: cLen,
      rating: Math.min(cRat + 15, 235),
      flex: Math.max(14, cFlex - 1.5),
      type: `${lenLabel(cLen)} Â· Stiffer (Blow Fix)`
    };
    recs.push(evalPole(stifferPole));
  }

  // --- NEXT STEP: +6 inches ---
  if (cLen < 18) {
    const next6Len = cLen + 0.5;
    // Typical rating increase when going up 6": +5 to +10 lbs to maintain load zone
    const next6Rat = cRat + 5;
    const next6Flex = estimateFlexForPole(next6Len, next6Rat, document.getElementById('brand').value);
    recs.push(evalPole({ length: next6Len, rating: next6Rat, flex: next6Flex, type: `${lenLabel(next6Len)} Â· Next Step (+6")` }));
    // Also same rating on +6"
    const next6SameRat = { length: next6Len, rating: cRat, flex: next6Flex, type: `${lenLabel(next6Len)} Â· Same Rating (+6")` };
    recs.push(evalPole(next6SameRat));
  }

  // --- REACH POLE: +12 inches ---
  if (cLen < 17.5) {
    const next12Len = cLen + 1.0;
    const next12Rat = cRat + 10;
    const next12Flex = estimateFlexForPole(next12Len, next12Rat, document.getElementById('brand').value);
    recs.push(evalPole({ length: next12Len, rating: next12Rat, flex: next12Flex, type: `${lenLabel(next12Len)} Â· Reach Pole (+12")` }));
  }

  // Sort non-current by projected height desc
  const current = recs.filter(r => r.isCurrent);
  const others  = recs.filter(r => !r.isCurrent).sort((a, b) => b.projH - a.projH);
  return [...current, ...others];
}

function estimateFlexForPole(length, rating, brand) {
  let base = 20.5 - (rating - 150) * 0.05 + (length - 14) * 1.4;
  if (brand === 'Essx')   base -= 0.6;
  if (brand === 'Pacer')  base += 0.4;
  if (brand === 'Nordic') base -= 0.3;
  return Math.max(14, Math.round(base * 10) / 10);
}

function lenLabel(len) {
  const ft = Math.floor(len);
  const inches = Math.round((len - ft) * 12);
  return inches === 0 ? `${ft}'` : `${ft}' ${inches}"`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PAINT SLIDER GRADIENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function paintGradient() {
  const s = document.getElementById('kSlider');
  const min = parseFloat(s.min), max = parseFloat(s.max), range = max - min;
  const pct = v => Math.max(0, Math.min(100, ((v - min) / range) * 100));
  s.style.background = `linear-gradient(to right,
    #607B9B 0%, #607B9B ${pct(zStall)}%,
    #ffb827 ${pct(zStall)}%, #ffb827 ${pct(zWarn)}%,
    #00e5a0 ${pct(zWarn)}%, #00e5a0 ${pct(zBlow)}%,
    #ff4d6a ${pct(zBlow)}%, #ff4d6a 100%)`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FT/IN FORMATTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toFtIn(m) {
  const total_in = Math.round(m * 39.3701);
  let ft = Math.floor(total_in / 12);
  let inc = total_in % 12;
  return `${ft}' ${inc}"`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MAIN INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initPhysics() {
  const weight = parseFloat(document.getElementById('weight').value);
  const rating = parseFloat(document.getElementById('rating').value);
  const flex   = parseFloat(document.getElementById('flex').value);
  const length = parseFloat(document.getElementById('length').value);

  if (!flex || isNaN(flex)) {
    estimateFlex();
    return setTimeout(initPhysics, 50);
  }

  currentPoleData = { weight, rating, flex, length };

  // Compute zones
  zOpt   = calcVopt(rating, flex, length, weight);
  zStall = zOpt - 1.0;
  zWarn  = zOpt - 0.3;
  zBlow  = zOpt + 0.8;

  // Update zone labels
  const mph = v => (v * 2.23694).toFixed(1);
  document.getElementById('lStall').textContent = `< ${mph(zStall)} mph`;
  document.getElementById('lWarn').textContent  = `${mph(zStall)}â€“${mph(zWarn)} mph`;
  document.getElementById('lOpt').textContent   = `${mph(zWarn)}â€“${mph(zBlow)} mph`;
  document.getElementById('lBlow').textContent  = `> ${mph(zBlow)} mph`;

  paintGradient();

  // Set slider to optimal speed
  document.getElementById('kSlider').value = zOpt.toFixed(2);

  document.getElementById('results').style.display = 'block';
  document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
  updateSim();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  UPDATE ON SLIDER MOVE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateSim() {
  const v      = parseFloat(document.getElementById('kSlider').value);
  const effOn  = document.getElementById('effToggle').checked;

  // Speed display
  document.getElementById('dispMph').textContent = (v * 2.23694).toFixed(1);
  document.getElementById('dispMs').textContent  = v.toFixed(2) + ' m/s';

  // Athlete metrics
  const hFt  = parseFloat(document.getElementById('hFt').value);
  const hIn  = parseFloat(document.getElementById('hIn').value);
  const hM   = hFt * 0.3048 + hIn * 0.0254;
  const com_m = hM * 0.57;

  // Grip
  const gFt  = parseInt(document.getElementById('gripFt').value);
  const gIn  = parseInt(document.getElementById('gripIn').value);
  const gFrac = parseFloat(document.getElementById('gripFrac').value);
  const grip_m = (gFt + (gIn + gFrac) / 12) * 0.3048;

  // Standing reach
  const reachInput = parseFloat(document.getElementById('standingReach').value);
  const reachFt    = reachInput > 0 ? reachInput : (hFt + hIn / 12) * 1.27;

  // Project height with current pole
  const { h: projM, status } = projectHeight(v, zOpt, grip_m, effOn);

  // Energy ceiling (theoretical, for display)
  const ceiling_m = energyCeiling(v, com_m);

  // Status chip
  const chip = document.getElementById('statusChip');
  const statusConfig = {
    STALL:   { label: 'Stall / Reject',  bg: 'rgba(96,123,155,0.25)',  color: 'var(--slate)' },
    UNDER:   { label: 'Under Power',     bg: 'rgba(255,184,39,0.2)',   color: 'var(--amber)' },
    OPTIMAL: { label: 'Optimal Lock',    bg: 'rgba(0,229,160,0.2)',    color: 'var(--green)' },
    BLOW:    { label: 'Blow Through',    bg: 'rgba(255,77,106,0.2)',   color: 'var(--red)'   }
  };
  const sc = statusConfig[status] || statusConfig.OPTIMAL;
  chip.textContent = sc.label;
  chip.style.background = sc.bg;
  chip.style.color = sc.color;

  // Metrics cards
  document.getElementById('hCeiling').textContent = toFtIn(ceiling_m);
  document.getElementById('hProj').textContent    = toFtIn(projM);

  const weight = parseFloat(document.getElementById('weight').value);
  const rating = parseFloat(document.getElementById('rating').value);
  const loadPct = (weight / rating) * 100;
  document.getElementById('loadVal').textContent = loadPct.toFixed(0) + '%';
  const lBar = document.getElementById('loadBarResult');
  lBar.style.width   = Math.min(loadPct, 130) + '%';
  lBar.style.background = loadPct >= 80 && loadPct <= 110 ? 'var(--green)' :
                           loadPct > 110 ? 'var(--red)' : 'var(--amber)';

  // Coaching insight
  buildInsight(status, v, grip_m, projM, weight, rating);

  // Recommendations
  const heightFt = hFt + hIn / 12;
  const recs = genRecommendations(weight, heightFt, v, currentPoleData, effOn);
  renderRecs(recs);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  COACHING INSIGHT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildInsight(status, v, grip_m, projM, weight, rating) {
  const prFt = parseInt(document.getElementById('prFt').value) || 0;
  const prIn = parseInt(document.getElementById('prIn').value) || 0;
  const prM  = (prFt + prIn / 12) * 0.3048;
  const prDiff = projM - prM;
  const prStr  = prDiff >= 0
    ? `<strong>+${toFtIn(prDiff)}</strong> above your current PR`
    : `<strong>${toFtIn(Math.abs(prDiff))}</strong> below your current PR`;

  const loadPct = (weight / rating) * 100;
  let loadMsg = '';
  if (loadPct < 80)       loadMsg = 'Pole rating is too heavy â€” consider a lighter-rated pole.';
  else if (loadPct > 110) loadMsg = 'Pole rating is too light â€” you may be over-loading it (injury risk).';
  else                    loadMsg = `Weight-to-rating ratio of <strong>${loadPct.toFixed(0)}%</strong> is in the ideal loading zone.`;

  const msgs = {
    STALL:   `âš ï¸ At this approach speed, the pole is not loading properly â€” the vaulter will likely flat-out or pit-crash. Increase runway speed or move to a softer pole. ${loadMsg}`,
    UNDER:   `ğŸ”¶ Approach speed is in the underpowered zone. The pole is loading partially but the vaulter can't fully invert. Projected: ${toFtIn(projM)} â€” ${prStr}. ${loadMsg}`,
    OPTIMAL: `âœ… Approach speed is in the <strong>optimal loading zone</strong> for this pole. Projected clearance: <strong>${toFtIn(projM)}</strong> â€” ${prStr}. ${loadMsg}`,
    BLOW:    `ğŸ”´ Speed is too high for this pole â€” the vaulter will blow through without being able to load the bend. Drop grip or move to a stiffer/longer pole. ${loadMsg}`
  };
  document.getElementById('insightBox').innerHTML = msgs[status] || '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER REC CARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderRecs(recs) {
  const container = document.getElementById('recContainer');
  const prFt = parseInt(document.getElementById('prFt').value) || 0;
  const prIn = parseInt(document.getElementById('prIn').value) || 0;
  const prM  = (prFt + prIn / 12) * 0.3048;
  container.innerHTML = '';

  // Find best non-current optimal
  const bestH = Math.max(...recs.filter(r => !r.isCurrent && r.status !== 'STALL').map(r => r.projH));

  recs.forEach(rec => {
    const card = document.createElement('div');
    card.className = 'rec-card';

    const isNext = !rec.isCurrent && rec.projH === bestH && rec.status !== 'STALL';
    if (rec.isCurrent) card.classList.add('current');
    else if (isNext)   card.classList.add('best');
    else if (rec.status === 'BLOW')  card.classList.add('blow');
    else if (rec.status === 'STALL') card.classList.add('stall');

    const diffM  = rec.projH - prM;
    const diffStr = Math.abs(diffM) < 0.01 ? 'at PR'
      : diffM > 0 ? `+${toFtIn(diffM)} from PR` : `${toFtIn(diffM)} from PR`;
    const diffColor = diffM > 0.01 ? 'var(--green)' : diffM < -0.01 ? 'var(--red)' : 'var(--muted)';

    const statusColors = {
      OPTIMAL: { bg: 'rgba(0,229,160,0.15)', fg: 'var(--green)' },
      UNDER:   { bg: 'rgba(255,184,39,0.15)', fg: 'var(--amber)' },
      BLOW:    { bg: 'rgba(255,77,106,0.15)', fg: 'var(--red)' },
      STALL:   { bg: 'rgba(96,123,155,0.15)', fg: 'var(--slate)' }
    };
    const sc = statusColors[rec.status] || statusColors.OPTIMAL;

    const vOptMph = (rec.vOpt * 2.23694).toFixed(1);

    card.innerHTML = `
      <div class="rec-pole-name">${lenLabel(rec.length)} Â· ${rec.rating}lbs</div>
      <div class="rec-type">${rec.type}</div>
      <div class="rec-height">${toFtIn(rec.projH)}</div>
      <div class="rec-diff" style="color:${diffColor}">${diffStr}</div>
      <div style="font-size:0.68rem;color:var(--muted);margin-top:6px;">Optimal speed: ${vOptMph} mph Â· Flex est. ${rec.flex}</div>
      <span class="rec-status-chip" style="background:${sc.bg};color:${sc.fg};">${rec.status}</span>
    `;
    container.appendChild(card);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RESET
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function resetAll() {
  document.getElementById('results').style.display = 'none';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
</body>
</html>
