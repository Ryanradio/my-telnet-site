<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pole Vault Biomechanics Engine</title>

<style>
body{
font-family:Arial, sans-serif;
background:#eef2f7;
margin:0;
padding:20px;
}

.container{
max-width:1100px;
margin:auto;
background:white;
border-radius:14px;
padding:20px;
box-shadow:0 10px 25px rgba(0,0,0,0.1);
}

.grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
}

label{font-size:14px;font-weight:bold}
input,select{
width:100%;
padding:6px;
margin-bottom:10px;
}

button{
padding:10px 16px;
background:#2563eb;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
}

.card{
background:#f8fafc;
padding:15px;
border-radius:10px;
margin-top:15px;
}

.big{
font-size:28px;
font-weight:bold;
}

.table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

.table th,.table td{
border:1px solid #ddd;
padding:6px;
text-align:center;
font-size:13px;
}

.good{color:#10b981;font-weight:bold}
.warn{color:#f59e0b;font-weight:bold}
.bad{color:#ef4444;font-weight:bold}

@media(max-width:800px){
.grid{grid-template-columns:1fr}
}
</style>

</head>

<body>

<div class="container">

<h1>Pole Vault Performance Engine</h1>

<div>

<label class="toggle"><input type="checkbox" id="toggleCoach" checked> Coach View</label>
<label class="toggle"><input type="checkbox" id="togglePhysics"> Physics View</label>
<label class="toggle"><input type="checkbox" id="toggleReco"> Recommendations</label>

</div>

<div class="grid">

<div>

<h3>Athlete</h3>

<label>Weight (lbs)</label>
<input id="weight" value="150">

<label>Height</label>
<div style="display:flex;gap:5px">
<input id="hFt" value="5">
<input id="hIn" value="9">
</div>

<label>Speed (mph)</label>
<input id="speed" value="19">

<label>Approach Steps</label>
<select id="steps">
<option>10</option>
<option>12</option>
<option selected>14</option>
<option>16</option>
<option>18</option>
</select>

<label>Skill Level</label>
<select id="skill">
<option>High School</option>
<option>College</option>
<option>Professional</option>
</select>

<label>Target Height (ft)</label>
<input id="target" value="15">

</div>

<div>

<h3>Pole</h3>

<label>Pole Length (ft)</label>
<input id="poleLength" value="15">

<label>Pole Rating (lbs)</label>
<input id="rating" value="165">

<label>Flex</label>
<input id="flex" value="20">

<label>Grip Height</label>
<div style="display:flex;gap:5px">
<input id="gFt" value="14">
<input id="gIn" value="9">
</div>

</div>

</div>

<button onclick="run()">Calculate</button>

<div id="coach" class="card"></div>
<div id="physics" class="card"></div>
<div id="reco" class="card"></div>

</div>

<script>

const g = 9.81;

const SKILL = {
"High School":{eff:0.38,push:0.45,com:0.20},
"College":{eff:0.46,push:0.55,com:0.25},
"Professional":{eff:0.55,push:0.70,com:0.30}
};

function run(){

const weight = num("weight");
const speedMph = num("speed");
const speed = speedMph * 0.44704;
const steps = num("steps");
const skill = SKILL[val("skill")];

const poleLength = num("poleLength");
const rating = num("rating");

const grip =
(num("gFt") + num("gIn")/12) * 0.3048;

const mass = weight * 0.453592;

/* Step contribution */

let stepFactor = 1;
if(steps<=10) stepFactor=0.9;
else if(steps==12) stepFactor=0.95;
else if(steps==14) stepFactor=1.0;
else if(steps==16) stepFactor=1.03;
else stepFactor=1.05;

/* Kinetic Energy */

const kinetic = 0.5 * mass * speed * speed;

/* Pole match (realistic range only Â±12%) */

let match = clamp((rating-weight)/40 + 1,0.88,1.12);

/* Energy to height */

const energyHeight =
(kinetic * skill.eff * stepFactor * match) /
(mass * g);

/* Final heights */

const realistic =
grip +
energyHeight +
skill.push +
skill.com;

const theoretical =
grip +
(kinetic * 0.6)/(mass*g) +
skill.push +
skill.com;

/* Safety */

let safety="Good";
let safetyClass="good";

if(rating < weight){
safety="Under-rated pole";
safetyClass="bad";
}

if(grip > (poleLength*0.3048 - 0.15)){
safety="Grip near top";
safetyClass="warn";
}

/* Coach */

document.getElementById("coach").innerHTML = `
<h3>Coach View</h3>

<div class="big">${toFt(realistic)}</div>
Realistic Projection

<br><br>

Theoretical Ceiling: <b>${toFt(theoretical)}</b>

<br><br>

Safety: <span class="${safetyClass}">${safety}</span>

<br><br>

Grip: ${toFt(grip)}

`;

/* Physics */

document.getElementById("physics").innerHTML = `
<h3>Physics</h3>

Mass: ${mass.toFixed(1)} kg<br>
Speed: ${speed.toFixed(2)} m/s<br>
Kinetic Energy: ${kinetic.toFixed(0)} J<br>
Conversion Efficiency: ${(skill.eff*100).toFixed(0)}%<br>
Step Factor: ${stepFactor.toFixed(2)}<br>
Pole Match: ${match.toFixed(2)}<br>
Energy Height: ${energyHeight.toFixed(2)} m<br>
Push: ${skill.push.toFixed(2)} m<br>
COM Bonus: ${skill.com.toFixed(2)} m<br>
`;

/* Recommendations */

let table=`<h3>Recommended Poles for Target</h3>
<table class="table">
<tr>
<th>Pole</th>
<th>Safe</th>
<th>Speed Needed</th>
</tr>`;

const target = num("target") * 0.3048;

for(let r=weight; r<=weight+40; r+=5){

let safe="Yes";
let cls="good";

if(r < weight){
safe="No";
cls="bad";
}

let neededEnergy =
(target - grip - skill.push - skill.com) *
(mass*g);

let neededSpeed =
Math.sqrt(
(neededEnergy)/(0.5*mass*skill.eff)
);

table += `
<tr>
<td>${poleLength}' ${r}</td>
<td class="${cls}">${safe}</td>
<td>${(neededSpeed/0.44704).toFixed(1)} mph</td>
</tr>
`;
}

table+="</table>";

document.getElementById("reco").innerHTML = table;

}

function num(id){return parseFloat(document.getElementById(id).value);}
function val(id){return document.getElementById(id).value;}

function clamp(v,min,max){
return Math.max(min,Math.min(max,v));
}

function toFt(m){

const inches = m*39.37;
const f = Math.floor(inches/12);
const i = Math.round(inches%12);

return `${f}' ${i}"`;

}

</script>

</body>
</html>